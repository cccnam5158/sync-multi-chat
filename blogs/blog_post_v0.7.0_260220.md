# Sync Multi Chat v0.7.0: 커스텀 프롬프트 빌더와 슬래시 명령 – 메인 입력에서 바로 실행

**작성일**: 2026-02-20
**버전**: v0.7.0

**Sync Multi Chat** v0.7.0에서는 **커스텀 프롬프트 빌더(Custom Prompt Builder)** 와 메인 입력창에서 저장된 프롬프트를 즉시 불러오는 **슬래시 명령(`/`)** 이 추가되었습니다. Cross Check용 프롬프트를 만들고 변수(`{{role}}`, `{{output_format}}` 등)로 관리한 뒤, 메인 화면에서 `/`만 입력하면 목록에서 골라 넣고 바로 전송할 수 있습니다.

---

## ✨ 커스텀 프롬프트 빌더 (Custom Prompt Builder)

Cross Check 메뉴에서 **"Add Custom Prompt"** 를 선택하면 전체 화면 **3패널 레이아웃**의 프롬프트 에디터가 열립니다.

### 📂 3패널 구성

-   **좌측 – 저장된 프롬프트 사이드바**: 카드 형태 목록, 검색/정렬(최근·제목), 새로 만들기(+ New), Import/Export
-   **중앙 – 에디터**: 제목 입력, 본문 편집(모노스페이스), Edit/Preview 전환(Alt+P), `{{` 입력 시 **변수 자동완성**
-   **우측 – 변수 패널**: 시스템(🔧) / 전역(🌐) / 개별(📌) 탭, 칩 클릭으로 `{{변수명}}` 삽입, **⚡ 변수 삽입** 팔레트

패널 접기(Alt+1, Alt+2), 드래그 리사이즈, **Zen 모드(Alt+Z)** 로 에디터만 넓게 쓸 수 있습니다.

### 🔤 3계층 변수

-   **시스템 변수**: `{{chat_thread}}`, `{{last_response}}`, `{{current_time}}` — 앱이 전송 시점에 채워 줍니다.
-   **전역 변수**: 모든 프롬프트에서 공통 사용(예: `output_format`, `role`, `lang`). 독립 저장.
-   **개별 변수**: 해당 프롬프트에만 쓰는 변수. 프롬프트와 함께 저장.

치환 우선순위는 **시스템 < 전역 < 개별**입니다. Preview 탭에서 치환 결과를 확인하고, **변수 하이라이트** / **미해결만 강조** 옵션으로 누락을 쉽게 점검할 수 있습니다.

### 📤 전송과 복사

-   **Send (Ctrl+Enter)**: 모든 변수를 치환한 최종 텍스트를 모든 활성 AI 웹뷰에 전송. 미저장 변경이 있으면 자동 저장 후 전송.
-   **Copy Prompt to Input**: 치환된 내용을 메인 입력창으로 복사. 시스템/전역 변수는 `{{이름}}` 그대로 두고, 개별 변수만 값으로 치환해 복사합니다(긴 대화 스레드가 입력창에 들어가는 것을 막기 위함).

Import/Export는 JSON으로 전체 프롬프트·전역 변수를 백업/복원합니다(덮어쓰기 방식).

---

## ⌨️ 메인 입력창 슬래시 명령 (`/`)

메인 하단 **프롬프트 입력창**에서 **`/`** 를 입력하면 저장된 커스텀 프롬프트 목록이 열립니다.

-   `/` 뒤에 글자를 더 입력하면 **제목·내용 기준 실시간 필터**
-   **↑/↓, Enter/Tab** 으로 선택 후 **Enter** 로 선택한 프롬프트 본문을 입력창에 **삽입**
-   **Esc** 로 목록 닫기

Cross Check 전용 프롬프트를 Builder에서 만들어 두었다면, 메인에서 `/` → 검색 → Enter 한 번으로 곧바로 사용할 수 있습니다.

---

## 📝 인라인 변수 폼 & 미해결 변수 처리

메인 입력창에 `{{변수명}}` 이 들어 있는 경우(슬래시로 프롬프트를 넣었거나 직접 입력했을 때):

-   **인라인 미니 변수 폼**이 자동으로 나타나, 시스템 변수를 제외한 변수들의 값을 입력할 수 있습니다.
-   **전송 시점**에 값이 비어 있는 변수가 있으면, 영문 확인 다이얼로그가 뜹니다:
    -   **변수 확인 후 전송**: 선택 시 첫 번째 미해결 변수 필드로 포커스 이동
    -   **그냥 전송** / **취소** 선택 가능

---

## 🖥️ 팝업 레이어 가시성 (슬래시 목록·변수 UI·모달)

슬래시 목록, 변수 자동완성, 미해결 변수 다이얼로그 등 **입력 관련 UI**가 떠 있을 때:

-   웹뷰를 일시적으로 리사이즈하는 방식 대신, **앱 레벨에서 웹뷰 영역에 딤/블러**를 적용해 팝업이 웹뷰에 가리지 않도록 했습니다.
-   **파일 업로드 확인 모달**도 웹뷰 뒤에 숨지 않도록 했고, 카운트다운·진행 바 UX를 정리하고 문구를 영문으로 통일했습니다.

---

## 🔧 그밖의 개선과 수정

-   **Gemini 한 번 로그인**: Chrome에서 한 번만 로그인해도 웹뷰에 반영되도록 개선. 서비스 도메인(`gemini.google.com/app`)에서만 첫 동기화를 수행하고, 쿠키 수가 늘면 재동기화합니다.
-   **Perplexity**: 파일+프롬프트 전송 시 대기 시간·폴링 조정, 입력 타겟(Lexical 에디터 우선) 보강으로 **중복 입력 완화** 및 체감 속도 개선.
-   **Preview ON + 접기**: Live Preview가 켜진 상태에서도 "Collapse controls"로 프롬프트 영역이 정상적으로 접히도록 수정.
-   **파일 업로드 모달 타이머**: 타이머 중복 실행 방지, 다른 팝업이 이미 열려 있을 때 레이어 상태가 올바르게 복원되도록 보완.

---

## 📋 버전별 변경 요약

| 구분 | 내용 |
|------|------|
| **신규 기능** | 커스텀 프롬프트 빌더 (3패널, 시스템/전역/개별 변수, Send·Copy to Input, Import/Export) |
| **신규 기능** | 메인 입력 슬래시 명령 (`/`) – 저장 프롬프트 검색·삽입 |
| **신규 기능** | 인라인 변수 폼 및 미해결 변수 전송 전 확인 |
| **개선** | 팝업 레이어 가시성 (딤/블러, 파일 업로드 모달) |
| **개선** | Gemini 한 번 로그인, Perplexity 파일+프롬프트 속도·중복 완화 |
| **버그 수정** | Preview ON + Collapse 동작, 파일 업로드 모달 타이머·레이어 상태 |

---

## 🔄 업데이트 방법

### 기존 사용자 (v0.5.8 이상)
앱 시작 시 자동으로 업데이트 알림이 표시됩니다. **"지금 업데이트"** 버튼을 클릭하세요.

### 신규 사용자
[GitHub Releases](https://github.com/cccnam5158/sync-multi-chat/releases)에서 최신 인스톨러를 다운로드하세요.

---

## 💡 활용 팁

1.  **Cross Check용 템플릿**: Builder에서 "Fact Check 프롬프트", "천재적 사고 모드" 같은 템플릿을 만들어 두고, 메인에서 `/` 로 불러와 변수만 채운 뒤 전송.
2.  **전역 변수**: `output_format`, `role`, `lang` 을 전역으로 두면 여러 프롬프트에서 일관된 형식·역할을 유지할 수 있습니다.
3.  **Preview 탭**: Builder에서 전송 전 Preview로 치환 결과와 미해결 변수를 확인하면 실수를 줄일 수 있습니다.

---

**지금 바로 v0.7.0으로 업데이트하고, 커스텀 프롬프트 빌더와 슬래시 명령으로 워크플로우를 단순화해 보세요!**

---

**TAGS**: Sync Multi Chat, Custom Prompt Builder, Slash Command, Variable Substitution, Cross Check, v0.7.0, Electron, AI Comparison, Gemini Login, Perplexity
